<div class="row">
    <ol class="breadcrumb col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <li><a ui-sref="portal">Home</a></li>
        <li class="active">Environment: {{env.name}}</a></li>
    </ol>
   
</div>
<div class="row">
    <div class="col-md-12 detail">
           <p><strong>Repo:</strong> {{env.repo_url}} </p>
           <p><strong>Branch:</strong> {{env.repo_branch}} </p>
    </div>	

    <div class="col-md-12 page-button-band ">
            <button ui-sref="compileReport({env:state.env})" class="btn"> Compile Reports </button> 
	        <button ng-hide="cstate" class="btn" ng-click="compile(state.env)" > Recompile </button>
	        <button ng-hide="!cstate" class="btn">Compiling <i class="fa fa-cog fa-spin"></i></button>       
		    <button type="button" class="btn" ui-sref="editEnv({env:state.env})">Edit</button>
	</div>	


    <div class="col-md-12">
    <table class="table table-lined" ng-table="tableParams">
        <tr ng-repeat="resource in $data track by resource.version" ng-init="extra = {}">
            <td data-title="'Date'" sortable="'date'" >{{resource.date|date:'dd/MM/yyyy hh:mm'}}</td>
            <td data-title="'Version'" sortable="'version'" ><a ui-sref="resources({env:resource.environment,version:resource.version})">{{resource.version}}</a></td>
            
            
            <td data-title="'Deploy State'" sortable="'state'">
                {{resource.state}}
            </td>
            <td data-title="'Deploy Progress'" >
               <deploy-progress data="resource.progress"> </deploy-progress>
              
            </td>
            <td align="right">
                <button class="btn btn-default btn-xs" ng-click="startDryRun(resource)"  title="Perform dry run">
                    <span class="glyphicon glyphicon-scale" aria-hidden="true"></span>
                </button>  
                
                <button class="btn btn-default btn-xs" ui-sref="report({env:state.env,version:resource.version})" title="Dry run report">
                    <span class="glyphicon glyphicon-list-alt"> </span>
                </button> 
                
           
                <button class="btn btn-default btn-xs" ng-click="deploy(resource)" ng-disabled="resource.released " title="Release version" >
                    <span class="glyphicon glyphicon-play" aria-hidden="true"></span>
                </button>    
         
                <button class="btn btn-default btn-xs" ng-click="deleteVersion(resource)" title="Remove version">
                    <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                </button>
             </td>  
            
        </tr>
    </table>
    </div>
</div>
